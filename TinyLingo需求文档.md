# TinyLingo 英语学习应用需求文档

## （1）版本记录

| 项目 | 内容 |
|------|------|
| **文档编写人** | AI Assistant |
| **负责人** | 产品开发团队 |
| **编写日期** | 2024年12月 |
| **产品名称** | TinyLingo - 沉浸式英语世界学习平台 |
| **版本号** | v1.0.0 |
| **上线计划** | 2024年Q1 |
| **开发周期** | 3个月（设计1周，开发8周，测试3周） |
| **评审及修改** | 待产品评审会议确认 |

---

## （2）版本说明

### 项目背景
传统英语学习方式存在以下痛点：
- **学习方式单一**：传统教材和应用缺乏趣味性和互动性
- **记忆效果差**：单纯的单词列表学习缺乏情境化记忆
- **学习动机不足**：缺乏个性化和创造性的学习体验
- **知识碎片化**：单词学习与实际应用场景脱节

### 核心需求
**要解决的核心冲突/痛点：**
1. **情境化学习需求** vs **传统抽象学习方式**
2. **个性化创作需求** vs **标准化学习内容**
3. **多模态学习需求** vs **单一文本学习方式**
4. **即时反馈需求** vs **延迟评估机制**

### 预期目的
**短期目标（3-6个月）：**
- 提供沉浸式英语学习体验，提升学习兴趣和效果
- 建立个性化的英语世界创作平台
- 实现AI驱动的智能学习辅助

**长期规划（1-2年）：**
- 构建完整的英语学习生态系统
- 集成更多AI功能（语音识别、智能对话等）
- 扩展到其他语言学习领域
- 建立学习社区和内容分享平台

---

## （3）设计规范

### 信息与意向

**产品设计原因：**
- 创新英语学习方式，通过视觉化世界构建提升学习体验
- 结合AI技术提供个性化学习路径
- 满足现代学习者对互动性和创造性的需求

**行业现状与竞品对标：**
- **Duolingo**：游戏化学习，但缺乏创造性
- **Rosetta Stone**：沉浸式学习，但交互性不足
- **Anki**：记忆卡片，但缺乏情境化
- **TinyLingo优势**：结合世界构建、AI生成、多模态学习的创新模式

**产品经理意图与未来规划：**
- 打造"学习即创作"的全新学习范式
- 建立以用户生成内容为核心的学习社区
- 发展成为综合性语言学习平台

### 基础设计理念

**产品主题：** 温暖、友好、富有创造力的学习环境

**整体色调与色号：**
- **主背景色：** `#FFFBF5` (温暖米白色)
- **次要背景：** `#FAF4ED` (浅米色)
- **主要操作色：** `#3B82F6` (蓝色系)
- **成功状态：** `#10B981` (绿色系)
- **警告状态：** `#F59E0B` (橙色系)
- **错误状态：** `#EF4444` (红色系)

**字号规范：**
- **标题：** 24px-32px (font-bold)
- **副标题：** 18px-20px (font-semibold)
- **正文：** 14px-16px (font-medium)
- **辅助文字：** 12px-14px (font-normal)

**全局按钮设计：**
- **主要按钮：** 圆角8px，蓝色背景，白色文字
- **次要按钮：** 圆角8px，透明背景，边框样式
- **图标按钮：** 圆形设计，悬停效果

**页面建议：**
- 采用卡片式布局，增强内容层次感
- 使用网格系统确保响应式设计
- 保持充足的留白空间，提升视觉舒适度

---

## （4）功能列表

### 4.1 首页 (Home Page)
| 功能点 | 功能点详细描述 | 优先级 |
|--------|----------------|--------|
| **英雄区域** | 展示应用核心理念"BUILD IT, LEARN IT"，提供主要行动号召 | P0 |
| **快速创建** | "Create World Now!"按钮直接跳转到创建世界页面 | P0 |
| **世界展示网格** | 展示热门世界，包含封面、名称、单词数、点赞数、收藏数 | P0 |
| **世界交互** | 支持查看、点赞、收藏世界的快捷操作 | P1 |
| **响应式布局** | 适配不同屏幕尺寸的网格展示 | P1 |

### 4.2 我的贴纸 (My Stickers)
| 功能点 | 功能点详细描述 | 优先级 |
|--------|----------------|--------|
| **贴纸库管理** | 查看、搜索、分类管理个人贴纸库（已分类/未分类） | P0 |
| **智能搜索** | 基于名称、标签、内容的实时搜索功能 | P0 |
| **标签系统** | 创建、编辑、删除标签，支持标签筛选 | P0 |
| **批量操作** | 支持批量选择、删除贴纸 | P1 |
| **视图模式** | 网格视图和列表视图切换 | P1 |
| **AI贴纸生成** | 基于图片上传和AI识别生成学习贴纸 | P0 |
| **学习内容生成** | 自动生成中文释义、音标、例句、标签等学习材料 | P0 |
| **数据持久化** | localStorage存储，支持数据导入导出 | P0 |
| **实时同步** | 监听数据变化，实时更新界面 | P1 |

### 4.3 创建世界 (Create World)
| 功能点 | 功能点详细描述 | 优先级 |
|--------|----------------|--------|
| **Konva.js画布** | 基于Konva.js的高性能2D画布编辑器 | P0 |
| **拖拽式编辑** | 支持贴纸拖拽、变换、旋转、缩放操作 | P0 |
| **历史管理** | 撤销/重做功能，支持操作历史记录 | P0 |
| **预览模式** | 实时预览世界效果，可切换标签显示/隐藏 | P0 |
| **贴纸集成** | 从"我的贴纸"加载贴纸数据，支持拖拽添加 | P0 |
| **右键菜单** | 上下文菜单提供删除、复制等快捷操作 | P1 |
| **画布适配** | 动态调整画布尺寸，适配窗口大小 | P1 |
| **世界保存** | 保存世界数据到localStorage，支持编辑现有世界 | P0 |
| **图片导出** | 生成世界预览图片 | P1 |

### 4.4 我的世界 (My Worlds)
| 功能点 | 功能点详细描述 | 优先级 |
|--------|----------------|--------|
| **世界管理** | 创建、编辑、删除、复制个人世界 | P0 |
| **搜索排序** | 按名称、创建时间、修改时间等多维度排序 | P1 |
| **世界预览** | 显示世界缩略图、基本信息 | P0 |
| **快速操作** | 编辑、删除、开始学习的快捷按钮 | P0 |
| **学习统计** | 显示每个世界的学习进度和统计数据 | P2 |

### 4.5 听写练习 (Dictation)
| 功能点 | 功能点详细描述 | 优先级 |
|--------|----------------|--------|
| **智能单词提取** | 从世界中自动提取英文单词进行听写练习 | P0 |
| **多模态展示** | 显示单词图片、中文释义、音标信息 | P0 |
| **音频播放** | 支持美音/英音，多重音频源备选 | P0 |
| **实时验证** | 输入验证和即时反馈 | P0 |
| **学习进度** | 显示当前进度和完成状态 | P1 |
| **错词回顾** | 记录错误单词，支持重复练习 | P1 |
| **设置面板** | 音频设置、难度调整等个性化配置 | P1 |

### 4.6 探索页面 (Explore)
| 功能点 | 功能点详细描述 | 优先级 |
|--------|----------------|--------|
| **内容发现** | 浏览和发现优质学习内容和世界 | P2 |
| **分类浏览** | 按主题、难度、类型分类展示内容 | P2 |
| **搜索功能** | 全局内容搜索和筛选 | P2 |
| **社区互动** | 用户作品分享、评论、点赞功能 | P2 |
| **推荐算法** | 基于用户行为的个性化内容推荐 | P2 |

**优先级说明：**
- **P0：** 核心功能，必须实现
- **P1：** 重要功能，优先实现
- **P2：** 增强功能，后续迭代

---

## （5）角色列表

| 角色名称 | 职责说明 | 备注 |
|----------|----------|------|
| **学习者** | 使用应用进行英语学习，创建和管理个人学习内容 | 主要用户群体 |
| **内容创作者** | 创建和分享高质量的学习世界和贴纸 | 社区贡献者 |
| **系统管理员** | 管理平台内容，维护系统稳定性 | 内部角色 |
| **AI助手** | 提供智能内容生成和学习建议 | 系统角色 |

---

## （6）框架图

```
TinyLingo 应用架构
├── 用户界面层 (UI Layer)
│   ├── 首页 (Home)
│   ├── 我的贴纸 (My Stickers)
│   ├── 创建世界 (Create World)
│   ├── 我的世界 (My Worlds)
│   ├── 听写练习 (Dictation)
│   └── 探索 (Explore)
├── 业务逻辑层 (Business Logic)
│   ├── 贴纸管理服务
│   ├── 世界构建服务
│   ├── 学习引擎
│   └── AI生成服务
├── 数据访问层 (Data Access)
│   ├── 本地存储 (localStorage)
│   ├── 文件系统
│   └── 外部API接口
└── 基础设施层 (Infrastructure)
    ├── React + Next.js 框架
    ├── Konva.js 画布引擎
    ├── AI服务集成
    └── 音频处理系统
```

---

## （7）流程图

### 整体用户流程
```
用户进入应用 → 选择功能模块 → 执行具体操作 → 获得反馈结果 → 继续使用或退出
```

### 核心功能流程

**1. 贴纸创建流程：**
```
输入描述 → AI生成图像 → 用户确认 → 添加学习信息 → 保存到贴纸库
```

**2. 世界构建流程：**
```
选择背景 → 拖拽贴纸 → 调整布局 → 预览效果 → 保存世界
```

**3. 听写学习流程：**
```
选择世界 → 提取单词 → 播放音频 → 用户输入 → 验证答案 → 显示结果 → 下一单词
```

### 异常处理流程
- **网络异常：** 本地缓存 → 离线模式 → 恢复后同步
- **AI生成失败：** 重试机制 → 备选方案 → 用户提示
- **音频播放失败：** 多音频源 → 本地语音合成 → 静默模式

---

## （8）功能需求（核心）

### 前端需求

#### 8.1 首页 (Home Page)
**页面组成：**
- 顶部导航栏和品牌标识
- 英雄区域（主标语和CTA按钮）
- 世界展示网格区域
- 底部导航链接

**功能点规则与交互：**
- 响应式网格布局，适配不同屏幕尺寸
- "Create World Now!"按钮直接跳转到创建世界页面
- 世界卡片显示封面、名称、统计信息
- 支持世界的查看、点赞、收藏操作

**跳转逻辑：**
- CTA按钮 → 创建世界页面 (/create-world)
- 世界卡片 → 世界详情或学习页面
- 导航链接 → 对应功能页面

#### 8.2 我的贴纸页面 (My Stickers)
**页面组成：**
- 顶部搜索栏和操作按钮
- 标签页切换（已分类/未分类）
- 标签筛选区域
- 贴纸网格展示区域
- 贴纸详情弹窗
- 上传和AI生成弹窗

**功能点规则与交互：**
- 实时搜索：支持按名称、标签、内容搜索
- 标签管理：创建、编辑、删除标签，支持拖拽分类
- 批量操作：多选贴纸进行批量删除
- 视图切换：网格视图和列表视图
- AI生成：上传图片自动识别并生成学习内容
- 数据持久化：localStorage存储，支持数据同步

**跳转逻辑：**
- 点击贴纸 → 详情弹窗
- 学习按钮 → 听写练习页面
- 上传按钮 → 文件选择和AI生成流程

#### 8.3 创建世界页面 (Create World)
**页面组成：**
- 左侧工具栏（撤销/重做、删除、预览、保存）
- 中央Konva.js画布区域
- 右侧贴纸面板（我的贴纸库）
- 底部缩放和画布控制

**功能点规则与交互：**
- 拖拽式编辑：从贴纸库拖拽贴纸到画布
- 画布操作：支持拖拽、旋转、缩放、删除对象
- 历史管理：撤销/重做操作，最多支持50步历史
- 预览模式：切换标签显示/隐藏，预览最终效果
- 右键菜单：提供删除、复制、置顶等快捷操作
- 响应式画布：动态调整尺寸适配窗口

**跳转逻辑：**
- 保存成功 → 我的世界页面
- 预览模式 → 听写练习页面
- 返回按钮 → 上一页面

#### 8.4 我的世界页面 (My Worlds)
**页面组成：**
- 顶部搜索和排序控制
- 创建新世界按钮
- 世界卡片网格展示
- 世界操作菜单

**功能点规则与交互：**
- 搜索排序：按名称、创建时间、修改时间排序
- 世界管理：编辑、删除、复制世界
- 快速操作：编辑、开始学习的快捷按钮
- 预览展示：显示世界缩略图和基本信息

**跳转逻辑：**
- 创建按钮 → 创建世界页面
- 编辑按钮 → 创建世界页面（编辑模式）
- 学习按钮 → 听写练习页面

#### 8.5 听写练习页面 (Dictation)
**页面组成：**
- 顶部进度条和导航
- 中央单词展示区（图片、中文、音标）
- 音频控制区域（播放/暂停、音频源切换）
- 输入框和提交按钮
- 设置面板和结果统计

**功能点规则与交互：**
- 智能单词提取：从世界对象中提取英文单词
- 多模态展示：显示单词图片、中文释义、音标
- 音频播放：支持美音/英音，多重音频源备选
- 实时验证：输入验证和即时反馈
- 学习统计：显示进度、正确率、错词记录

**跳转逻辑：**
- 完成练习 → 结果页面
- 设置按钮 → 设置面板
- 返回按钮 → 世界选择页面

#### 8.6 探索页面 (Explore)
**页面组成：**
- 搜索和筛选栏
- 分类导航
- 内容展示网格
- 推荐内容区域

**功能点规则与交互：**
- 内容发现：浏览优质学习内容和世界
- 分类浏览：按主题、难度、类型筛选
- 搜索功能：全局内容搜索
- 社区互动：点赞、收藏、分享功能

**跳转逻辑：**
- 内容卡片 → 详情页面
- 学习按钮 → 对应学习页面

### 后端需求

#### 8.4 数据存储系统
**本地存储结构：**
```javascript
localStorage: {
  'savedStickers': StickerData[],
  'savedWorlds': WorldData[],
  'userSettings': UserSettings,
  'learningProgress': LearningData[]
}
```

**数据同步机制：**
- 实时保存用户操作
- 跨页面数据同步
- 数据备份和恢复

#### 8.5 AI服务集成
**图像生成API：**
- 集成Gemini AI服务
- 支持文本到图像生成
- 背景移除功能
- 图像优化和压缩

**音频处理系统：**
- Web Speech API优先
- 多重外部音频源备选
- 音频预加载和缓存
- 发音类型切换

#### 8.6 学习引擎
**单词提取算法：**
- 从世界画布对象中智能提取单词
- 支持多种数据结构解析
- 单词去重和验证

**学习进度跟踪：**
- 实时统计正确率
- 错词记录和分析
- 学习时长统计

---

## （9）非功能需求

### 9.1 性能需求
**响应速度：**
- 页面加载时间 < 3秒
- 用户操作响应时间 < 500ms
- 画布操作流畅度 > 30fps
- AI生成响应时间 < 10秒

**并发处理能力：**
- 支持多标签页同时使用
- 本地存储并发读写安全
- 音频播放队列管理

**资源优化：**
- 图片懒加载和压缩
- 组件按需加载
- 内存使用优化

### 9.2 安全性需求
**数据保密：**
- 用户数据本地存储，不上传服务器
- 敏感信息加密存储
- API密钥安全管理

**权限限制：**
- 文件访问权限控制
- API调用频率限制
- 用户输入验证和过滤

### 9.3 可靠性需求
**异常恢复：**
- 网络断开自动重连
- 操作失败重试机制
- 数据损坏自动修复

**数据可回溯：**
- 操作历史记录（撤销/重做）
- 数据版本管理
- 错误日志记录

**容错处理：**
- AI服务失败降级方案
- 音频播放多重备选
- 优雅的错误提示

### 9.4 拓展性需求
**功能模块可复用：**
- 组件化设计架构
- 插件式功能扩展
- API接口标准化

**数据可用于分析：**
- 学习行为数据收集
- 用户偏好分析
- 内容质量评估

**平台扩展能力：**
- 多语言支持框架
- 移动端适配能力
- 第三方服务集成接口

---

## 附录

### 技术栈说明
- **前端框架：** React 18 + Next.js 14
- **UI组件：** Tailwind CSS + Lucide Icons
- **画布引擎：** Konva.js + React-Konva
- **AI服务：** Google Gemini API
- **音频处理：** Web Speech API + 外部音频API
- **状态管理：** React Hooks + localStorage
- **开发语言：** TypeScript

### 开发规范
- 遵循React最佳实践
- 使用TypeScript确保类型安全
- 组件化和模块化设计
- 响应式设计原则
- 无障碍访问支持

---

**文档状态：** 初稿完成，待评审确认
**最后更新：** 2024年12月
**下次评审：** 待定